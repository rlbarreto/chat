<!DOCTYPE html>
<html>
    <head>
        <% include partials/header.ejs %>
    </head>

    <body ng-app="chatroom">

        <div class="container" ng-controller="mainController as main">

            <div class="row">
                <div class="col-md-12" ng-hide="main.gotNickname">
                    <form ng-submit="main.nicknameSubmitHandler($event)">
                        <input type="text"
                            class="form-control center-text"
                            ng-model="main.nickname"
                            id="nickname"
                            placeholder="Enter your nickname"
                            autocomplete="off"
                            required
                            autofocus
                        >
                    </form>
                </div>
            </div>

            <div class="row">
                <div class="col-md-2" id="chattersContainer" ng-show="main.gotNickname">
                    <ul id="chatters">
                        <li ng-repeat="nickname in ::main.nicknames" ng-click="main.newChatRoom(nickname)">{{nickname.nickname}}</li>
                    </ul>
                </div>

                <div class="col-md-10" ng-show="main.gotNickname">
                    <ul id="chatters">
                        <li ng-repeat="room in ::main.rooms" ng-click="main.visibleRoom.visible = false; main.visibleRoom = room; room.visible = true;">{{room}}</li>
                    </ul>
                    <div ng-show="room.visible">
                        <div ng-repeat="room in ::main.rooms">
                            <form id="chatForm" ng-submit="main.submitHandler($event)">
                                <input type="text"
                                    id="chatInput"
                                    class="form-control"
                                    ng-model="chatInput"
                                    placeholder="Enter your message"
                                    autocomplete="off"
                                    required
                                    autofocus
                                >
                            </form>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <% include partials/scripts.ejs %>
    </body>
</html>
